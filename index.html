<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>皇室战争记牌器 · 2025 语音识别响应优化版</title>
<style>
    body {font-family:"Microsoft YaHei",Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);margin:0;padding:20px;color:#fff;min-height:100vh;position:relative}
    .container {max-width:1200px;margin:auto;display:grid;grid-template-columns:1fr 400px;gap:25px}
    .main {background:rgba(255,255,255,0.15);backdrop-filter:blur(15px);border-radius:25px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.4)}
    h1 {text-align:center;margin:0 0 20px}
    button {padding:14px 30px;margin:8px;font-size:17px;border:none;border-radius:50px;cursor:pointer;font-weight:bold;transition:all .3s}
    #startBtn {background:#28a745}#stopBtn {background:#dc3545}#undoBtn {background:#6c757d}#resetBtn {background:#ffc107;color:#000}
    button:hover {transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,0.5)}
    button:disabled {opacity:0.5;cursor:not-allowed}
    .status {text-align:center;padding:20px;background:rgba(0,0,0,0.4);border-radius:18px;font-size:19px;margin:20px 0}
    .slots {display:grid;grid-template-columns:repeat(4,1fr);gap:20px}
    .slot {height:140px;border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:21px;font-weight:bold;box-shadow:0 8px 30px rgba(0,0,0,0.5)}
    .used {background:linear-gradient(135deg,#ff5e5e,#ff304f)}
    .library {background:linear-gradient(135deg,#00d2ff,#0099ff)}
    .speech-text {background:rgba(0,0,0,0.6);border-radius:20px;padding:20px;margin-top:20px;text-align:center;font-size:24px;font-weight:bold;min-height:80px;border:2px solid rgba(255,255,255,0.3);backdrop-filter:blur(10px)}
    .atlas {background:rgba(255,255,255,0.15);backdrop-filter:blur(15px);border-radius:25px;padding:25px;max-height:90vh;overflow-y:auto}
    .search {width:100%;padding:14px;margin-bottom:20px;border-radius:15px;border:none;font-size:16px}
    .card-list {display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .card-btn {background:rgba(255,255,255,0.25);border:none;border-radius:12px;padding:12px 8px;font-size:14px;cursor:pointer;transition:all .2s}
    .card-btn:hover {background:rgba(255,255,255,0.45);transform:scale(1.08)}
    #toast {position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.92);color:#fff;padding:18px 40px;border-radius:50px;font-size:24px;font-weight:bold;box-shadow:0 15px 40px rgba(0,0,0,0.6);backdrop-filter:blur(12px);z-index:9999;opacity:0;transition:all .4s;pointer-events:none;border:2px solid rgba(255,255,255,0.3)}
    #toast.show {opacity:1;transform:translateX(-50%) translateY(-15px)}
</style>
</head>
<body>
<div class="container">
    <div class="main">
        <h1>皇室战争记牌器 2025 语音识别持续检测版</h1>
        
        <div style="text-align:center">
            <button id="startBtn">开始实时监听</button>
            <button id="stopBtn" disabled>停止监听</button>
            <button id="undoBtn" disabled>撤销上一张</button>
            <button id="resetBtn">清空卡槽</button>
        </div>

        <div class="status" id="status">点击开始后持续监听，说出卡牌名称，文字实时显示下方</div>
        <div class="slots" id="slots"></div>
        
        <!-- 实时语音文字显示栏 -->
        <div class="speech-text" id="speechText">
            听到的内容会实时显示在这里...
        </div>
    </div>

    <div class="atlas">
        <h2 style="text-align:center">卡牌图鉴（点我补录）</h2>
        <input type="text" class="search" placeholder="搜索卡牌…" id="searchInput">
        <div class="card-list" id="cardList"></div>
    </div>
</div>

<div id="toast">识别成功</div>

<script>
// 完整卡牌库与别名
const allCards = ["骑士","弓箭手","哥布林","炸弹兵","骷髅兵","野蛮人","亡灵","烈焰精灵","蝙蝠","迷
